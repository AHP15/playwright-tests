# Test info

- Name: has title
- Location: /home/runner/work/playwright-tests/playwright-tests/tests/app.spec.ts:3:1

# Error details

```
Error: Timed out 5000ms waiting for expect(locator).toHaveTitle(expected)

Locator: locator(':root')
Expected pattern: /Vite + React Hello/
Received string:  "Vite + React + TS"
Call log:
  - expect.toHaveTitle with timeout 5000ms
  - waiting for locator(':root')
    9 × locator resolved to <html lang="en">…</html>
      - unexpected value "Vite + React + TS"

    at /home/runner/work/playwright-tests/playwright-tests/tests/app.spec.ts:7:22
```

# Page snapshot

```yaml
- link "Vite logo":
  - /url: https://vite.dev
  - img "Vite logo"
- link "React logo":
  - /url: https://react.dev
  - img "React logo"
- heading "Vite + React Hello" [level=1]
- button "count is 0"
- paragraph:
  - text: Edit
  - code: src/App.tsx
  - text: and save to test HMR
- paragraph: Click on the Vite and React logos to learn more
```

# Test source

```ts
   1 | import { test, expect } from '@playwright/test';
   2 |
   3 | test('has title', async ({ page }) => {
   4 |   await page.goto('/');
   5 |
   6 |   // Expect a title "to contain" a substring.
>  7 |   await expect(page).toHaveTitle(/Vite + React Hello/);
     |                      ^ Error: Timed out 5000ms waiting for expect(locator).toHaveTitle(expected)
   8 | });
   9 |
  10 | test('should fails', async ({ page }) => {
  11 |   await page.goto('/');
  12 |
  13 |   // Expect a title "to contain" a substring.
  14 |   await expect(page).toHaveTitle(/ok/);
  15 | });
  16 |
```

# Local changes

```diff
diff --git a/.github/scripts/create-issue.mjs b/.github/scripts/create-issue.mjs
new file mode 100644
index 0000000..ef64599
--- /dev/null
+++ b/.github/scripts/create-issue.mjs
@@ -0,0 +1,42 @@
+import * as core from '@actions/core';
+import { getOctokit, context } from '@actions/github';
+
+try {
+  const token = process.env.GITHUB_TOKEN || core.getInput('github-token');
+  if (!token) {
+    throw new Error('No GitHub token provided.');
+  }
+
+  const { TOTAL, PASSED, FAILED, FLAKY, SKIPPED, REPORT_FOLDER } = process.env;
+
+  const octokit = getOctokit(token);
+  const { owner, repo } = context.issue
+
+  const issueTitle = `# Playwright Test Results ❌`;
+  const issueBody = `
+  ${issueTitle}
+  ## Summary
+  - **Total**: ${TOTAL}
+  - **Passed**: ${PASSED}
+  - **Failed**: ${FAILED}
+  - **Flaky**: ${FLAKY}
+  - **Skipped**: ${SKIPPED}
+  ## Details
+  [Report Link](${`https://${owner}.github.io/${repo}/${REPORT_FOLDER}`})
+
+  [ALL Reports Link](${`https://${owner}.github.io/${repo}`})
+  ## Additional Information
+  Last updated: ${new Date().toUTCString()}
+  `;
+
+  await octokit.rest.issues.create({
+    owner: context.repo.owner,
+    repo: context.repo.repo,
+    title: issueTitle,
+    body: issueBody,
+  });
+  console.log('Issue created successfully');
+
+} catch (error) {
+  console.error('Error creating issue:', error);
+}
diff --git a/.github/workflows/playwright.yml b/.github/workflows/playwright.yml
index 64184ac..a250106 100644
--- a/.github/workflows/playwright.yml
+++ b/.github/workflows/playwright.yml
@@ -25,17 +25,12 @@ jobs:
           token: ${{ secrets.GITHUB_TOKEN }}
           max_timeout: 120
     outputs:
-      deployment_url: ${{ steps.wait-for-deployment.outputs.deployment_url }}
+      deployment_url: ${{ steps.wait-for-deployment.outputs.url }}
 
   test:
     name: Run Tests
     needs: wait-for-deployment-url
     runs-on: ubuntu-latest
-    # outputs:
-    #   passed: ${{ steps.extract-test-results.outputs.passed }}
-    #   failed: ${{ steps.extract-test-results.outputs.failed }}
-    #   flaky: ${{ steps.extract-test-results.outputs.flaky }}
-    #   skipped: ${{ steps.extract-test-results.outputs.skipped }}
     env:
       BASE_URL: ${{ needs.wait-for-deployment-url.outputs.deployment_url }}
       GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
@@ -63,6 +58,7 @@ jobs:
         id: extract-test-results
         if: always()
         run: node .github/scripts/parse-test-results.mjs
+
       - name: Upload Playwright report artifact
         if: ${{ !cancelled() }}
         uses: actions/upload-artifact@v4
@@ -70,9 +66,11 @@ jobs:
           name: playwright-report
           path: playwright-report
           retention-days: 1
+
       - name: Generate Folder
         id: generate-folder-name
         run: node .github/scripts/generate-folder-name.mjs
+
       - name: Deploy Test report to GH pages
         if: ${{ !cancelled() }}
         uses: peaceiris/actions-gh-pages@v3
@@ -84,6 +82,7 @@ jobs:
           force_orphan: false
           keep_files: true
           commit_message: "Deploy Playwright test report"
+
       - name: Comment on PR
         if: ${{ github.event_name == 'pull_request' }}
         env:
@@ -94,6 +93,7 @@ jobs:
           FLAKY: ${{ steps.extract-test-results.outputs.flaky }}
           SKIPPED: ${{ steps.extract-test-results.outputs.skipped }}
         run: node .github/scripts/pr-comment.mjs
+
       - name: Update index.html
         if: ${{ !cancelled() }}
         env:
@@ -104,3 +104,13 @@ jobs:
           FLAKY: ${{ steps.extract-test-results.outputs.flaky }}
           SKIPPED: ${{ steps.extract-test-results.outputs.skipped }}
         run: node .github/scripts/update-index-html.mjs
+      - name: Create Issue on failing tests
+        if: ${{ github.event_name != 'pull_request' }}
+        run: node .github/scripts/create-issue.mjs
+        env:
+          TOTAL: ${{ steps.extract-test-results.outputs.total }}
+          PASSED: ${{ steps.extract-test-results.outputs.passed }}
+          FAILED: ${{ steps.extract-test-results.outputs.failed }}
+          FLAKY: ${{ steps.extract-test-results.outputs.flaky }}
+          SKIPPED: ${{ steps.extract-test-results.outputs.skipped }}
+          REPORT_FOLDER: ${{ steps.generate-folder-name.outputs.folder_name }}
diff --git a/tests/app.spec.ts b/tests/app.spec.ts
new file mode 100644
index 0000000..92dda29
--- /dev/null
+++ b/tests/app.spec.ts
@@ -0,0 +1,15 @@
+import { test, expect } from '@playwright/test';
+
+test('has title', async ({ page }) => {
+  await page.goto('/');
+
+  // Expect a title "to contain" a substring.
+  await expect(page).toHaveTitle(/Vite + React Hello/);
+});
+
+test('should fails', async ({ page }) => {
+  await page.goto('/');
+
+  // Expect a title "to contain" a substring.
+  await expect(page).toHaveTitle(/ok/);
+});
```