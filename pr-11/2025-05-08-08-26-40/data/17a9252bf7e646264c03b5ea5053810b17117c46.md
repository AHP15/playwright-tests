# Test info

- Name: has title
- Location: /home/runner/work/playwright-tests/playwright-tests/tests/app.spec.ts:3:1

# Error details

```
Error: Timed out 5000ms waiting for expect(locator).toHaveTitle(expected)

Locator: locator(':root')
Expected pattern: /Vite + React Hello/
Received string:  "404: NOT_FOUND"
Call log:
  - expect.toHaveTitle with timeout 5000ms
  - waiting for locator(':root')
    9 × locator resolved to <html lang="en">…</html>
      - unexpected value "404: NOT_FOUND"

    at /home/runner/work/playwright-tests/playwright-tests/tests/app.spec.ts:7:22
```

# Page snapshot

```yaml
- main:
  - paragraph:
    - strong: "404"
    - text: ": NOT_FOUND Code:"
    - code: "`DEPLOYMENT_NOT_FOUND`"
    - text: "ID:"
    - code: "`iad1::r985k-1746692771814-6660afb1f78c`"
  - link "This deployment cannot be found. For more information and troubleshooting, see our documentation.":
    - /url: https://vercel.com/docs/errors/platform-error-codes#deployment_not_found
```

# Test source

```ts
   1 | import { test, expect } from '@playwright/test';
   2 |
   3 | test('has title', async ({ page }) => {
   4 |   await page.goto('/');
   5 |
   6 |   // Expect a title "to contain" a substring.
>  7 |   await expect(page).toHaveTitle(/Vite + React Hello/);
     |                      ^ Error: Timed out 5000ms waiting for expect(locator).toHaveTitle(expected)
   8 | });
   9 |
  10 | test('should fails', async ({ page }) => {
  11 |   await page.goto('/');
  12 |
  13 |   // Expect a title "to contain" a substring.
  14 |   await expect(page).toHaveTitle(/ok/);
  15 | });
  16 |
```

# Local changes

```diff
diff --git a/.github/scripts/cleanup.mjs b/.github/scripts/cleanup.mjs
new file mode 100644
index 0000000..ff1a5b3
--- /dev/null
+++ b/.github/scripts/cleanup.mjs
@@ -0,0 +1,4 @@
+import { getOctokit, context } from '@actions/github';
+import * as core from '@actions/core';
+import process from 'process';
+
diff --git a/.github/workflows/playwright.yml b/.github/workflows/playwright.yml
index 63cc1ec..776925b 100644
--- a/.github/workflows/playwright.yml
+++ b/.github/workflows/playwright.yml
@@ -19,7 +19,6 @@ jobs:
     name: Run Tests
     runs-on: ubuntu-latest
     env:
-      BASE_URL: https://ff-customer-portal-git-${{github.ref_name}}-egaliti.vercel.app
       GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
     steps:
       - name: wait for deployment to finish
diff --git a/playwright.config.ts b/playwright.config.ts
index bb04b99..4de6b09 100644
--- a/playwright.config.ts
+++ b/playwright.config.ts
@@ -30,7 +30,7 @@ export default defineConfig({
     screenshot: 'only-on-failure',
 
     /* Collect trace when retrying the failed test. See https://playwright.dev/docs/trace-viewer */
-    trace: 'on-first-retry',
+    trace: process.env.CI ? 'on' : 'on-first-retry',
   },
 
   /* Configure projects for major browsers */
```