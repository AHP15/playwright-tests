# Test info

- Name: should fails
- Location: /home/runner/work/playwright-tests/playwright-tests/tests/app.spec.ts:10:1

# Error details

```
Error: Timed out 5000ms waiting for expect(locator).toHaveTitle(expected)

Locator: locator(':root')
Expected pattern: /ok/
Received string:  "404: NOT_FOUND"
Call log:
  - expect.toHaveTitle with timeout 5000ms
  - waiting for locator(':root')
    9 × locator resolved to <html lang="en">…</html>
      - unexpected value "404: NOT_FOUND"

    at /home/runner/work/playwright-tests/playwright-tests/tests/app.spec.ts:14:22
```

# Page snapshot

```yaml
- main:
  - paragraph:
    - strong: "404"
    - text: ": NOT_FOUND Code:"
    - code: "`DEPLOYMENT_NOT_FOUND`"
    - text: "ID:"
    - code: "`iad1::rkk5n-1746691762969-839a67a84fe7`"
  - link "This deployment cannot be found. For more information and troubleshooting, see our documentation.":
    - /url: https://vercel.com/docs/errors/platform-error-codes#deployment_not_found
```

# Test source

```ts
   1 | import { test, expect } from '@playwright/test';
   2 |
   3 | test('has title', async ({ page }) => {
   4 |   await page.goto('/');
   5 |
   6 |   // Expect a title "to contain" a substring.
   7 |   await expect(page).toHaveTitle(/Vite + React Hello/);
   8 | });
   9 |
  10 | test('should fails', async ({ page }) => {
  11 |   await page.goto('/');
  12 |
  13 |   // Expect a title "to contain" a substring.
> 14 |   await expect(page).toHaveTitle(/ok/);
     |                      ^ Error: Timed out 5000ms waiting for expect(locator).toHaveTitle(expected)
  15 | });
  16 |
```

# Local changes

```diff
diff --git a/.github/workflows/playwright.yml b/.github/workflows/playwright.yml
index a250106..63cc1ec 100644
--- a/.github/workflows/playwright.yml
+++ b/.github/workflows/playwright.yml
@@ -2,9 +2,10 @@ name: Playwright Test
 
 on:
   push:
-    branches: [main]
+    branches: [main, dev, stg, prod]
   pull_request:
-    branches: [main]
+    types: [opened, synchronize, reopened]
+    branches: [main, dev, stg, prod]
 
 permissions:
   contents: write
@@ -14,27 +15,24 @@ permissions:
   issues: write
 
 jobs:
-  wait-for-deployment-url:
-    runs-on: ubuntu-latest
-    name: Wait for Vercel Deployment URL
-    steps:
-      - name: Wait for 200 status from vercel deployment
-        uses: patrickedqvist/wait-for-vercel-preview@v1.3.1
-        id: wait-for-deployment
-        with:
-          token: ${{ secrets.GITHUB_TOKEN }}
-          max_timeout: 120
-    outputs:
-      deployment_url: ${{ steps.wait-for-deployment.outputs.url }}
-
   test:
     name: Run Tests
-    needs: wait-for-deployment-url
     runs-on: ubuntu-latest
     env:
-      BASE_URL: ${{ needs.wait-for-deployment-url.outputs.deployment_url }}
+      BASE_URL: https://ff-customer-portal-git-${{github.ref_name}}-egaliti.vercel.app
       GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
     steps:
+      - name: wait for deployment to finish
+        run: sleep 60
+
+      - name: Set Pull Request Branch
+        if: github.event_name == 'pull_request'
+        run: echo "GITHUB_REF_NAME=${{ github.head_ref }}" >> $GITHUB_ENV
+
+      - name: Set Push Branch
+        if: github.event_name != 'pull_request'
+        run: echo "GITHUB_REF_NAME=${{ github.ref_name }}" >> $GITHUB_ENV
+
       - name: Checkout code
         uses: actions/checkout@v4
 
@@ -52,6 +50,8 @@ jobs:
 
       - name: Run Playwright tests
         continue-on-error: true
+        env:
+          BASE_URL: "https://ff-customer-portal-git-${{ env.GITHUB_REF_NAME }}-egaliti.vercel.app"
         run: npx playwright test
 
       - name: extract test results
```